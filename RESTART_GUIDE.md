# 应用程序重启指南

## 概述

为了避免多个操作界面同时存在和端口冲突问题，应用程序现在具备自动停止现有 Node.js 进程的功能。

## 自动停止功能

应用程序在启动时会自动执行以下操作：

1. **检测现有 Node.js 进程**：系统会检查当前运行的所有 Node.js 进程
2. **停止其他进程**：自动停止除了当前进程外的所有其他 Node.js 进程
3. **等待清理完成**：等待 1 秒确保所有进程完全停止
4. **启动新实例**：启动新的应用程序实例

## 重启方法

### 方法一：使用操作界面重启按钮（推荐）

直接点击操作界面上的重启按钮，系统会自动完成重启流程。

### 方法二：直接启动应用程序

```batch
# 直接启动main.js，会自动停止现有进程
node src/main.js
```

### 方法三：手动停止并重启

#### Windows 平台

```batch
# 停止所有 Node.js 进程
powershell -Command "Get-Process node | Stop-Process -Force"

# 启动新实例
node src/main.js
```

## 功能特点

✅ **自动检测**：自动检测并停止现有的 Node.js 进程
✅ **Windows 平台优化**：专门为 Windows 平台优化，兼容性更好
✅ **安全保护**：不会停止当前正在启动的进程
✅ **错误处理**：如果没有其他进程运行，不会报错
✅ **用户友好**：提供清晰的控制台输出信息
✅ **界面集成**：与操作界面重启按钮完美集成

## 故障排除

### 问题 1：进程无法停止

**现象**：某些 Node.js 进程无法正常停止
**解决**：

- Windows：使用任务管理器手动结束 Node.js 进程

### 问题 2：端口仍被占用

**现象**：启动时提示端口 3000 被占用
**解决**：

1. 确保所有 Node.js 进程已停止
2. 检查是否有其他程序占用 3000 端口
3. 等待几秒钟让系统完全释放端口

## 最佳实践

1. **使用界面重启按钮**：优先使用操作界面上的重启按钮，最方便快捷
2. **检查控制台输出**：注意观察控制台输出的进程停止和启动信息
3. **等待完全启动**：确保看到"HTTP 服务器已启动，监听端口 3000"的消息后再进行操作
4. **定期重启**：如果发现性能问题或异常，可以定期重启应用程序

## 技术细节

### Windows 平台实现

- 使用 PowerShell 的 `Get-Process` 和 `Stop-Process` 命令
- 通过进程 ID 过滤，避免停止当前进程
- 处理"找不到进程"的情况，避免错误提示

### 错误处理

- 捕获并处理进程停止时的错误
- 区分错误和警告信息
- 提供用户友好的错误提示

### 界面集成

- 重启功能与操作界面按钮完全集成
- 点击重启按钮会触发完整的重启流程
- 无需用户手动执行命令行操作
