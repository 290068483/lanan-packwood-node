# 客户状态功能模块修改 TODO 列表

## 1. 概述

根据最新的业务需求，已完成客户状态管理模块的修改，移除定金相关功能，同时保持打包、出货和归档状态的正常运行。目前系统支持全部出货、部分出货和未出货三种出货状态。

## 2. 修改目标

- [x] 移除所有与定金状态相关的代码和逻辑
- [x] 更新状态枚举和状态转换规则
- [x] 调整 API 接口以适应新的状态体系
- [x] 更新状态显示逻辑
- [x] 实现部分出货功能

## 3. 已完成任务

### 3.1 状态管理器修改 (src/utils/customer-status-manager.js)

- [x] 移除状态枚举中的定金相关状态
- [x] 更新状态检查逻辑，移除定金相关的判断
- [x] 修改状态转换规则，确保不依赖定金状态
- [x] 更新状态颜色映射，移除定金相关颜色
- [x] 添加部分出货状态支持

### 3.2 状态管理工具修改 (src/utils/status-manager.js)

- [x] 移除定金相关状态枚举
- [x] 更新状态检查函数，移除定金相关逻辑
- [x] 调整状态历史记录逻辑
- [x] 添加部分出货状态管理

### 3.3 API 接口修改 (src/api/customer-status-api.js)

- [x] 检查并更新所有状态相关的 API 接口
- [x] 确保归档、出货等操作不依赖定金状态
- [x] 更新 API 返回的状态信息结构
- [x] 添加部分出货 API 接口

### 3.4 前端界面更新

- [x] 移除界面上所有定金状态相关的显示元素
- [x] 更新状态图标显示逻辑
- [x] 调整状态详情展示内容
- [x] 添加出货选择对话框
- [x] 实现部分出货按钮功能

### 3.5 文档更新

- [x] 更新客户状态设计文档
- [x] 更新 API 接口文档中相关状态说明
- [x] 更新功能说明文档
- [x] 编写需求文档

## 4. 验证任务

- [x] 确保打包状态正常计算
- [x] 验证归档功能不受影响
- [x] 验证出货功能正常工作
- [x] 确认状态历史记录正确
- [x] 测试所有 API 接口正常运行
- [x] 验证部分出货功能
- [x] 验证出货状态选择功能

## 5. 后续优化任务

### 5.1 性能优化

- [ ] 优化状态计算性能
- [ ] 改进文件监控效率
- [ ] 优化数据库查询

### 5.2 功能增强

- [ ] 添加批量操作功能
- [ ] 实现状态变更通知
- [ ] 添加数据导出功能

### 5.3 用户体验改进

- [ ] 优化界面响应速度
- [ ] 改进错误提示信息
- [ ] 添加操作确认对话框
