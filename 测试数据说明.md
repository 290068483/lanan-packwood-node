# 测试数据说明文档

## 概述

本系统现在包含完整的测试数据，覆盖了所有业务流程和功能场景。测试数据分为两类：基础状态测试数据和特定功能测试数据。

## 基础状态测试数据

### 1. 测试客户-未打包

- **状态**: 未打包
- **用途**: 测试初始状态和开始处理功能
- **特点**: packProgress 为 0，无 packSeqs

### 2. 测试客户-正在处理

- **状态**: 正在处理
- **用途**: 测试处理中的状态和进度更新
- **特点**: packProgress 为 50%，有部分 packSeqs

### 3. 测试客户-已打包

- **状态**: 已打包
- **用途**: 测试打包完成和归档功能
- **特点**: packProgress 为 100%，有完整的 packSeqs 和 packDate

### 4. 测试客户-已归档

- **状态**: 已归档
- **用途**: 测试归档功能和出货准备
- **特点**: 包含 archiveDate，完整的处理历史

### 5. 测试客户-全部出货

- **状态**: 全部出货
- **用途**: 测试全部出货功能和状态显示
- **特点**: 包含 shipmentDate，完整的出货历史

### 6. 测试客户-部分出货

- **状态**: 部分出货
- **用途**: 测试部分出货功能和补件需求
- **特点**: 包含 shipmentDate，可以测试补件流程

### 7. 测试客户-未出货

- **状态**: 未出货
- **用途**: 测试标记为未出货功能
- **特点**: 从归档状态标记为未出货，可以重新出货

## 特定功能测试数据

### 1. 测试客户-需要补件

- **状态**: 部分出货
- **用途**: **专门测试补件功能**
- **特点**:
  - 总共 15 件，已出货 10 件，剩余 5 件需要补件
  - 包含 replenishmentNeeded: true
  - 包含补件原因："客户要求追加 5 件产品"
  - 有详细的出货记录和剩余件数信息

### 2. 测试客户-多次归档恢复

- **状态**: 已归档
- **用途**: **测试多次归档和恢复功能**
- **特点**:
  - 经历了 3 次归档和 2 次恢复
  - 包含 archiveCount: 3, restoreCount: 2
  - 完整的归档恢复历史记录
  - 测试归档功能的稳定性

### 3. 测试客户-出货状态变更

- **状态**: 未出货
- **用途**: **测试出货状态变更和取消功能**
- **特点**:
  - 从全部出货状态变更为未出货
  - 包含 shipmentCancelled: true
  - 包含取消原因："客户要求取消出货"
  - 测试出货状态的可逆性

### 4. 测试客户-大批量

- **状态**: 正在处理
- **用途**: **测试大批量订单处理功能**
- **特点**:
  - 总共 200 件，当前完成 50 件（25%）
  - 包含 isLargeBatch: true
  - 包含 batchPriority: "high"
  - 包含预计完成时间
  - 测试系统处理大批量订单的能力

### 5. 测试客户-补件完成

- **状态**: 全部出货
- **用途**: **测试完整补件流程**
- **特点**:
  - 完整的补件流程示例
  - 原始出货 8 件，补件 2 件
  - 包含 replenishmentCompleted: true
  - 包含 originalShippedParts: 8, replenishedParts: 2
  - 测试补件功能的完整性

## 测试场景覆盖

### 归档功能测试

1. **基本归档**: 测试客户-已归档
2. **多次归档**: 测试客户-多次归档恢复
3. **归档后出货**: 所有出货状态客户
4. **归档恢复**: 测试客户-多次归档恢复

### 出货功能测试

1. **全部出货**: 测试客户-全部出货
2. **部分出货**: 测试客户-部分出货、测试客户-需要补件
3. **出货状态变更**: 测试客户-出货状态变更
4. **出货取消**: 测试客户-出货状态变更
5. **重新出货**: 测试客户-未出货

### 补件功能测试

1. **补件需求识别**: 测试客户-需要补件
2. **补件流程**: 测试客户-补件完成
3. **补件完成验证**: 测试客户-补件完成
4. **部分出货处理**: 测试客户-部分出货

### 大批量处理测试

1. **大批量识别**: 测试客户-大批量
2. **进度跟踪**: 测试客户-大批量
3. **优先级处理**: 测试客户-大批量
4. **时间估算**: 测试客户-大批量

## 使用建议

### 1. 功能测试顺序

```
1. 基础状态测试
   ↓
2. 归档功能测试
   ↓
3. 出货功能测试
   ↓
4. 补件功能测试
   ↓
5. 大批量处理测试
   ↓
6. 综合场景测试
```

### 2. 关键测试点

- **状态流转**: 确保各状态之间的转换正确
- **数据完整性**: 确保状态历史记录完整
- **功能边界**: 测试各种边界条件
- **异常处理**: 测试取消、恢复等异常场景

### 3. 测试数据管理

- 原始数据已备份到 `data/database.backup.*.json`
- 可使用 `reset-database.js` 重置为基础数据
- 可使用 `add-specific-test-data.js` 添加特定功能数据

## 启动测试

1. **启动应用程序**:

   ```bash
   npm start
   ```

2. **验证测试数据**:

   - 检查所有 12 个测试客户是否正确显示
   - 验证每个客户的状态和历史记录
   - 确认所有功能按钮可用

3. **执行功能测试**:
   - 按照测试场景逐一测试
   - 记录测试结果
   - 验证数据一致性

## 注意事项

1. **数据备份**: 测试前确保已备份重要数据
2. **环境隔离**: 建议在测试环境中进行
3. **功能顺序**: 按照建议的测试顺序进行
4. **结果记录**: 详细记录每个功能的测试结果

---

现在系统已具备完整的测试数据，可以全面测试归档、出货、补件等所有功能！
